{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\n\nexport async function ImageSearch(source, options) {\n\t\n\tconst response = await axios.get(`${source}${options}`)\n\treturn response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nexport function renderGallery(images) {\n    let galleryHTML = \"\";\n    images.forEach((element) => {\n        galleryHTML += `\n            <li class=\"gallery_item\">\n                <a class=\"gallery_link\" href=\"${element.largeImageURL}\" title=\"${element.tags}\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${element.webformatURL}\"\n                        alt=\"${element.tags}\"\n                    />\n                </a>\n                <ul class=\"gallery_info\">\n                    <li><span class=\"bold_text\">Likes</span><p class=\"text\">${element.likes}</p></li>\n                    <li><span class=\"bold_text\">Views</span><p class=\"text\">${element.views}</p></li>\n                    <li><span class=\"bold_text\">Comments</span><p class=\"text\">${element.comments}</p></li>\n                    <li><span class=\"bold_text\">Downloads</span><p class=\"text\">${element.downloads}</p></li>\n                </ul>\n            </li>\n        `;\n    });\n\n    gallery.insertAdjacentHTML('beforeend', galleryHTML);\n    \n    const lightbox = new SimpleLightbox('.gallery a', {\n        nav: true,\n        overlay: true,\n        captions: true,\n        captionSelector: 'self',\n        captionType: 'attr',\n        captionData: 'title',\n        captionPosition: 'bottom',\n        captionDelay: 250\n    });\n    \n    lightbox.refresh();\n}\n\n","import { ImageSearch } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// DOM Elements\nconst { form, search, loader, loadButton, gallery } = querySelectors({\n\tform: 'form',\n\tsearch: '.search_bar',\n\tloader: '.loader',\n\tloadButton: '.load',\n\tgallery: '.gallery',\n});\n\n// API Configuration\nconst config = {\n\tsource: 'https://pixabay.com/api/?',\n\toptions: new URLSearchParams({\n\t\tkey: '46749030-b6cef6a6b69e043ecf4444c1b',\n\t\timage_type: 'photo',\n\t\torientation: 'horizontal',\n\t\tper_page: 12,\n\t}),\n};\n\n// Messages\nconst messages = {\n\tnoMatchError:\n\t\t'Sorry, there are no images matching your search query. Please try again!',\n\tcollectionEndMessage:\n\t\t\"We're sorry, but you've reached the end of search results.\",\n};\n\n// Global Variables\nlet page;\n\n// Event Dispatching\nconst dispatchEvent = array =>\n\tdocument.dispatchEvent(new CustomEvent('imagesFetched', { detail: array }));\n\n// Event Listeners\nform.addEventListener('submit', handleFormSubmit);\nloadButton.addEventListener('click', handleLoadMore);\ndocument.addEventListener('imagesFetched', event => {\n\trenderGallery(event.detail);\n});\n\n// Main Functions\nfunction handleFormSubmit(event) {\n\tevent.preventDefault();\n\tconst searchValue = getSearchValue();\n\tif (!searchValue) return;\n\n\tresetGallery();\n\tshowLoader(true);\n\tinitializeSearch(searchValue);\n}\n\nfunction initializeSearch(searchValue) {\n\tconfig.options.set('page', page);\n\tconfig.options.set('q', searchValue);\n\tperformSearch();\n}\n\nfunction handleLoadMore() {\n\tshowLoader(true);\n\tincrementPage();\n\tperformSearch();\n}\n\nfunction performSearch() {\n\tImageSearch(config.source, config.options)\n\t\t.then(posts => handleImageSearch(posts))\n\t\t.catch(error => {\n\t\t\tconsole.error('API Error:', error); // Log the full error object for debugging\n\t\t\traiseError(\n\t\t\t\terror.message || 'An unexpected error occurred. Please try again.'\n\t\t\t);\n\t\t})\n\t\t.finally(() => {\n\t\t\tshowLoader(false);\n\t\t\tresetSearch();\n\t\t});\n}\n\n// Helper Functions\nfunction handleImageSearch(posts) {\n\tif (posts.total) {\n\t\tdispatchEvent(posts.hits);\n\t\tshowLoadBtn(true);\n\t\tcheckIfEndOfResults(posts.total);\n\t\tconsole.log(posts);\n\t} else {\n\t\traiseError(messages.noMatchError);\n\t}\n}\n\nfunction checkIfEndOfResults(totalResults) {\n\tconst currentItemsCount =\n\t\tparseInt(config.options.get('per_page')) *\n\t\tparseInt(config.options.get('page'));\n\tif (currentItemsCount > totalResults) {\n\t\thideLoadButton();\n\t\traiseInfo(messages.collectionEndMessage);\n\t}\n}\n\nfunction getSearchValue() {\n\treturn search.value.trim();\n}\n\nfunction resetGallery() {\n\tpage = 1;\n\tgallery.innerHTML = '';\n}\n\nfunction resetSearch() {\n\tsearch.value = '';\n}\n\nfunction showLoader(isVisible) {\n\tloader.style.display = isVisible ? 'block' : 'none';\n}\n\nfunction showLoadBtn(isVisible) {\n\tloadButton.style.display = isVisible ? 'block' : 'none';\n}\n\nfunction incrementPage() {\n\tconfig.options.set('page', ++page);\n}\n\nfunction hideLoadButton() {\n\tloadButton.style.display = 'none';\n}\n\n// Function to query DOM elements\nfunction querySelectors(selectors) {\n\tconst elements = {};\n\tObject.entries(selectors).forEach(([key, selector]) => {\n\t\telements[key] = document.querySelector(selector);\n\t});\n\treturn elements;\n}\n\n// Toast Notification Functions\nfunction raiseError(error) {\n\tiziToast.error({\n\t\tmessage: error,\n\t\tposition: 'topRight',\n\t\tcolor: 'red',\n\t\ttheme: 'dark',\n\t});\n}\n\nfunction raiseInfo(info) {\n\tiziToast.info({\n\t\tmessage: info,\n\t\tposition: 'topRight',\n\t\tcolor: 'blue',\n\t\ttheme: 'dark',\n\t});\n}\n"],"names":["ImageSearch","source","options","axios","gallery","renderGallery","images","galleryHTML","element","SimpleLightbox","form","search","loader","loadButton","querySelectors","config","messages","page","dispatchEvent","array","handleFormSubmit","handleLoadMore","event","searchValue","getSearchValue","resetGallery","showLoader","initializeSearch","performSearch","incrementPage","posts","handleImageSearch","error","raiseError","resetSearch","showLoadBtn","checkIfEndOfResults","totalResults","hideLoadButton","raiseInfo","isVisible","selectors","elements","key","selector","iziToast","info"],"mappings":"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"}