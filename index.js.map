{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\n\nexport async function ImageSearch(source, options) {\n\t\n\tconst response = await axios.get(`${source}${options}`)\n\treturn response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nexport function renderGallery(images) {\n    let galleryHTML = \"\";\n    images.forEach((element) => {\n        galleryHTML += `\n            <li class=\"gallery_item\">\n                <a class=\"gallery_link\" href=\"${element.largeImageURL}\" title=\"${element.tags}\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${element.webformatURL}\"\n                        alt=\"${element.tags}\"\n                    />\n                </a>\n                <ul class=\"gallery_info\">\n                    <li><span class=\"bold_text\">Likes</span><p class=\"text\">${element.likes}</p></li>\n                    <li><span class=\"bold_text\">Views</span><p class=\"text\">${element.views}</p></li>\n                    <li><span class=\"bold_text\">Comments</span><p class=\"text\">${element.comments}</p></li>\n                    <li><span class=\"bold_text\">Downloads</span><p class=\"text\">${element.downloads}</p></li>\n                </ul>\n            </li>\n        `;\n    });\n\n    gallery.insertAdjacentHTML('beforeend', galleryHTML);\n    \n    const lightbox = new SimpleLightbox('.gallery a', {\n        nav: true,\n        overlay: true,\n        captions: true,\n        captionSelector: 'self',\n        captionType: 'attr',\n        captionData: 'title',\n        captionPosition: 'bottom',\n        captionDelay: 250\n    });\n    \n    lightbox.refresh();\n}\n\n","import { ImageSearch } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('form');\nconst search = document.querySelector('.search_bar');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load');\nconst gallery = document.querySelector('.gallery');\n\nconst source = 'https://pixabay.com/api/?';\nconst options = new URLSearchParams({\n\tkey: '46749030-b6cef6a6b69e043ecf4444c1b',\n\timage_type: 'photo',\n\torientation: 'horizontal',\n\tper_page: 12,\n});\n\nconst noMatchError =\n\t'Sorry, there are no images matching your search query. Please try again!';\nconst collectionEndError =\n\t\"We're sorry, but you've reached the end of search results.\";\nconst dispatchEvent = array =>\n\tdocument.dispatchEvent(new CustomEvent('imagesFetched', { detail: array }));\n\nlet page;\n\nform.addEventListener('submit', event => {\n\tevent.preventDefault();\n\tlet searchValue = search.value.trim();\n\tif (!searchValue) return;\n\n\tpage = 1;\n\tgallery.innerHTML = '';\n\toptions.set('page', page);\n\toptions.set('q', searchValue);\n\tloader.style.display = 'block';\n\n\tImageSearch(source, options)\n\t\t.then(posts => {\n\t\t\tloadButton.style.display = 'block';\n\t\t\thandleImageSearch(posts);\n\t\t\tclear();\n\t\t})\n\t\t.catch(error => {\n\t\t\traiseError(error);\n\t\t\tclear();\n\t\t});\n});\n\nloadButton.addEventListener('click', () => {\n\toptions.set('page', ++page);\n\tImageSearch(source, options)\n\t\t.then(posts => {\n\t\t\thandleImageSearch(posts);\n\t\t})\n\t\t.catch(error => {\n\t\t\traiseError(error);\n\t\t\tclear();\n\t\t});\n});\n\ndocument.addEventListener('imagesFetched', event => {\n\trenderGallery(event.detail);\n});\n\nfunction handleImageSearch(posts) {\n\tif (posts.total) {\n\t\tdispatchEvent(posts.hits);\n\t\tif (\n\t\t\tparseInt(options.get('per_page')) * parseInt(options.get('page')) >\n\t\t\tposts.total\n\t\t) {\n\t\t\tloadButton.style.display = 'none';\n\t\t\traiseInfo(collectionEndError);\n\t\t}\n\t\tconsole.log(posts);\n\t} else {\n\t\tloadButton.style.display = 'none';\n\t\tconsole.log(posts);\n\t\traiseError(noMatchError);\n\t}\n}\n\nfunction raiseError(error) {\n\tiziToast.error({\n\t\tmessage: error,\n\t\tposition: 'topRight',\n\t\tcolor: 'red',\n\t\ttheme: 'dark',\n\t});\n}\n\nfunction raiseInfo(info) {\n\tiziToast.error({\n\t\tmessage: info,\n\t\tposition: 'topRight',\n\t\tcolor: 'blue',\n\t\ttheme: 'dark',\n\t});\n}\n\nfunction clear() {\n\tloader.style.display = 'none';\n\tsearch.value = '';\n}\n"],"names":["ImageSearch","source","options","axios","gallery","renderGallery","images","galleryHTML","element","SimpleLightbox","form","search","loader","loadButton","noMatchError","collectionEndError","dispatchEvent","array","page","event","searchValue","posts","handleImageSearch","clear","error","raiseError","raiseInfo","iziToast","info"],"mappings":"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"}